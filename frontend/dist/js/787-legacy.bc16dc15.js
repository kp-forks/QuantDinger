"use strict";(self["webpackChunkvue_antd_pro"]=self["webpackChunkvue_antd_pro"]||[]).push([[787],{11787:function(t,e,a){a.r(e),a.d(e,{default:function(){return v}});var s=function(){var t=this,e=t._self._c;return e("div",{staticClass:"user-manage-page",class:{"theme-dark":t.isDarkTheme}},[e("div",{staticClass:"page-header"},[e("h2",{staticClass:"page-title"},[e("a-icon",{attrs:{type:"team"}}),e("span",[t._v(t._s(t.$t("userManage.title")||"User Management"))])],1),e("p",{staticClass:"page-desc"},[t._v(t._s(t.$t("userManage.description")||"Manage system users, roles and permissions"))])]),e("a-tabs",{staticClass:"manage-tabs",on:{change:t.handleTabChange},model:{value:t.activeTab,callback:function(e){t.activeTab=e},expression:"activeTab"}},[e("a-tab-pane",{key:"users",attrs:{tab:t.$t("userManage.tabUsers")||"User Management"}},[e("div",{staticClass:"toolbar"},[e("div",{staticClass:"toolbar-left"},[e("a-button",{attrs:{type:"primary"},on:{click:t.showCreateModal}},[e("a-icon",{attrs:{type:"user-add"}}),t._v(" "+t._s(t.$t("userManage.createUser")||"Create User")+" ")],1),e("a-button",{on:{click:t.loadUsers}},[e("a-icon",{attrs:{type:"reload"}}),t._v(" "+t._s(t.$t("common.refresh")||"Refresh")+" ")],1)],1),e("div",{staticClass:"toolbar-right"},[e("a-input-search",{staticStyle:{width:"280px"},attrs:{placeholder:t.$t("userManage.searchPlaceholder")||"Search by username/email",allowClear:""},on:{search:t.handleSearch,pressEnter:t.handleSearch},model:{value:t.searchKeyword,callback:function(e){t.searchKeyword=e},expression:"searchKeyword"}})],1)]),e("a-card",{staticClass:"user-table-card",attrs:{bordered:!1}},[e("a-table",{attrs:{columns:t.columns,dataSource:t.users,loading:t.loading,pagination:t.pagination,rowKey:function(t){return t.id}},on:{change:t.handleTableChange},scopedSlots:t._u([{key:"status",fn:function(a){return[e("a-tag",{attrs:{color:"active"===a?"green":"red"}},[t._v(" "+t._s("active"===a?t.$t("userManage.active")||"Active":t.$t("userManage.disabled")||"Disabled")+" ")])]}},{key:"role",fn:function(a){return[e("a-tag",{attrs:{color:t.getRoleColor(a)}},[t._v(" "+t._s(t.getRoleLabel(a))+" ")])]}},{key:"last_login_at",fn:function(a){return[a?e("span",[t._v(t._s(t.formatTime(a)))]):e("span",{staticClass:"text-muted"},[t._v(t._s(t.$t("userManage.neverLogin")||"Never"))])]}},{key:"credits",fn:function(a){return[e("span",{staticClass:"credits-value"},[t._v(t._s(t.formatCredits(a)))])]}},{key:"vip_expires_at",fn:function(a){return[a&&t.isVipActive(a)?[e("a-tag",{attrs:{color:"gold"}},[e("a-icon",{attrs:{type:"crown"}}),t._v(" "+t._s(t.formatDate(a))+" ")],1)]:e("span",{staticClass:"text-muted"},[t._v("-")])]}},{key:"action",fn:function(a,s){return[e("a-space",[e("a-tooltip",{attrs:{title:t.$t("common.edit")||"Edit"}},[e("a-button",{attrs:{type:"link",size:"small"},on:{click:function(e){return t.showEditModal(s)}}},[e("a-icon",{attrs:{type:"edit"}})],1)],1),e("a-tooltip",{attrs:{title:t.$t("userManage.adjustCredits")||"Adjust Credits"}},[e("a-button",{attrs:{type:"link",size:"small"},on:{click:function(e){return t.showCreditsModal(s)}}},[e("a-icon",{staticStyle:{color:"#722ed1"},attrs:{type:"wallet"}})],1)],1),e("a-tooltip",{attrs:{title:t.$t("userManage.setVip")||"Set VIP"}},[e("a-button",{attrs:{type:"link",size:"small"},on:{click:function(e){return t.showVipModal(s)}}},[e("a-icon",{staticStyle:{color:"#faad14"},attrs:{type:"crown"}})],1)],1),e("a-tooltip",{attrs:{title:t.$t("userManage.resetPassword")||"Reset Password"}},[e("a-button",{attrs:{type:"link",size:"small"},on:{click:function(e){return t.showResetPasswordModal(s)}}},[e("a-icon",{attrs:{type:"key"}})],1)],1),e("a-tooltip",{attrs:{title:t.$t("common.delete")||"Delete"}},[e("a-popconfirm",{attrs:{title:t.$t("userManage.confirmDelete")||"Are you sure to delete this user?"},on:{confirm:function(e){return t.handleDelete(s.id)}}},[e("a-button",{attrs:{type:"link",size:"small",disabled:s.id===t.currentUserId}},[e("a-icon",{staticStyle:{color:"#ff4d4f"},attrs:{type:"delete"}})],1)],1)],1)],1)]}}])})],1)],1),e("a-tab-pane",{key:"strategies",attrs:{tab:t.$t("systemOverview.tabTitle")||"System Overview"}},[t.strategySummary?e("div",{staticClass:"summary-cards"},[e("div",{staticClass:"summary-card"},[e("div",{staticClass:"summary-icon",staticStyle:{background:"linear-gradient(135deg, #667eea, #764ba2)"}},[e("a-icon",{attrs:{type:"fund"}})],1),e("div",{staticClass:"summary-info"},[e("div",{staticClass:"summary-value"},[t._v(t._s(t.strategySummary.total_strategies||0))]),e("div",{staticClass:"summary-label"},[t._v(t._s(t.$t("systemOverview.totalStrategies")||"Total Strategies"))])])]),e("div",{staticClass:"summary-card"},[e("div",{staticClass:"summary-icon",staticStyle:{background:"linear-gradient(135deg, #11998e, #38ef7d)"}},[e("a-icon",{attrs:{type:"play-circle"}})],1),e("div",{staticClass:"summary-info"},[e("div",{staticClass:"summary-value"},[t._v(t._s(t.strategySummary.running_strategies||0))]),e("div",{staticClass:"summary-sub"},[t._v(" "+t._s(t.$t("systemOverview.live")||"实盘")+": "+t._s(t.strategySummary.running_live_strategies||0)+" / "+t._s(t.$t("systemOverview.signal")||"仅通知")+": "+t._s(t.strategySummary.running_signal_strategies||0)+" ")]),e("div",{staticClass:"summary-label"},[t._v(t._s(t.$t("systemOverview.runningStrategies")||"Running"))])])]),e("div",{staticClass:"summary-card"},[e("div",{staticClass:"summary-icon",staticStyle:{background:"linear-gradient(135deg, #f093fb, #f5576c)"}},[e("a-icon",{attrs:{type:"dollar"}})],1),e("div",{staticClass:"summary-info"},[e("div",{staticClass:"summary-value"},[t._v(t._s(t.formatNumber(t.strategySummary.total_capital)))]),e("div",{staticClass:"summary-sub"},[t._v(" "+t._s(t.$t("systemOverview.live")||"实盘")+": "+t._s(t.formatNumber(t.strategySummary.live_capital))+" / "+t._s(t.$t("systemOverview.signal")||"仅通知")+": "+t._s(t.formatNumber(t.strategySummary.signal_capital))+" ")]),e("div",{staticClass:"summary-label"},[t._v(t._s(t.$t("systemOverview.totalCapital")||"Total Capital"))])])]),e("div",{staticClass:"summary-card"},[e("div",{staticClass:"summary-icon",style:{background:(t.strategySummary.total_pnl||0)>=0?"linear-gradient(135deg, #11998e, #38ef7d)":"linear-gradient(135deg, #ff416c, #ff4b2b)"}},[e("a-icon",{attrs:{type:"rise"}})],1),e("div",{staticClass:"summary-info"},[e("div",{staticClass:"summary-value",class:(t.strategySummary.total_pnl||0)>=0?"text-profit":"text-loss"},[t._v(" "+t._s(t.formatPnl(t.strategySummary.total_pnl))+" "),e("span",{staticClass:"roi-badge"},[t._v(t._s(t.strategySummary.total_roi||0)+"%")])]),e("div",{staticClass:"summary-sub"},[t._v(" "+t._s(t.$t("systemOverview.live")||"实盘")+": "+t._s(t.formatPnl(t.strategySummary.live_pnl))+" / "+t._s(t.$t("systemOverview.signal")||"仅通知")+": "+t._s(t.formatPnl(t.strategySummary.signal_pnl))+" ")]),e("div",{staticClass:"summary-label"},[t._v(t._s(t.$t("systemOverview.totalPnl")||"Total PnL"))])])])]):t._e(),e("div",{staticClass:"toolbar"},[e("div",{staticClass:"toolbar-left"},[e("a-button",{on:{click:t.loadSystemStrategies}},[e("a-icon",{attrs:{type:"reload"}}),t._v(" "+t._s(t.$t("common.refresh")||"Refresh")+" ")],1),e("a-select",{staticStyle:{width:"140px"},on:{change:t.handleStrategyFilterChange},model:{value:t.strategyStatusFilter,callback:function(e){t.strategyStatusFilter=e},expression:"strategyStatusFilter"}},[e("a-select-option",{attrs:{value:"all"}},[t._v(t._s(t.$t("systemOverview.filterAll")||"All Status"))]),e("a-select-option",{attrs:{value:"running"}},[t._v(t._s(t.$t("systemOverview.filterRunning")||"Running"))]),e("a-select-option",{attrs:{value:"stopped"}},[t._v(t._s(t.$t("systemOverview.filterStopped")||"Stopped"))])],1)],1),e("div",{staticClass:"toolbar-right"},[e("a-input-search",{staticStyle:{width:"280px"},attrs:{placeholder:t.$t("systemOverview.searchPlaceholder")||"Search strategy/symbol/user",allowClear:""},on:{search:t.handleStrategySearch,pressEnter:t.handleStrategySearch},model:{value:t.strategySearchKeyword,callback:function(e){t.strategySearchKeyword=e},expression:"strategySearchKeyword"}})],1)]),e("a-card",{staticClass:"user-table-card",attrs:{bordered:!1}},[e("a-table",{attrs:{columns:t.strategyColumns,dataSource:t.systemStrategies,loading:t.strategyLoading,pagination:t.strategyPagination,rowKey:function(t){return t.id},scroll:{x:1600}},on:{change:t.handleStrategyTableChange},scopedSlots:t._u([{key:"strategyStatus",fn:function(a){return[e("span",{staticClass:"status-cell"},[e("span",{staticClass:"status-dot",class:"running"===a?"dot-running":"dot-stopped"}),e("span",{class:"running"===a?"status-running":"status-stopped"},[t._v(" "+t._s("running"===a?t.$t("systemOverview.running")||"Running":t.$t("systemOverview.stopped")||"Stopped")+" ")])])]}},{key:"userInfo",fn:function(a,s){return[e("a-tooltip",{attrs:{title:s.nickname||s.username||"-"}},[e("span",{staticClass:"user-cell"},[e("a-avatar",{style:{backgroundColor:t.getUserColor(s.user_id),fontSize:"11px",marginRight:"6px"},attrs:{size:"small"}},[t._v(" "+t._s((s.nickname||s.username||"?").charAt(0).toUpperCase())+" ")]),e("span",{staticClass:"user-name"},[t._v(t._s(t.truncate(s.nickname||s.username||"-",8)))])],1)])]}},{key:"symbolInfo",fn:function(a,s){return[e("div",[e("span",{staticClass:"symbol-text"},[t._v(t._s(s.symbol||"-"))]),"cross_sectional"===s.cs_strategy_type?e("a-tag",{staticStyle:{"margin-left":"4px"},attrs:{color:"purple",size:"small"}},[t._v("CS")]):t._e()],1),"cross_sectional"===s.cs_strategy_type&&s.symbol_list&&s.symbol_list.length?e("div",{staticClass:"symbol-count text-muted"},[t._v(" "+t._s(s.symbol_list.length)+" "+t._s(t.$t("systemOverview.symbols")||"symbols")+" ")]):t._e()]}},{key:"capitalInfo",fn:function(a){return[e("span",[t._v(t._s(t.formatNumber(a)))])]}},{key:"pnlInfo",fn:function(a,s){return[e("div",{class:s.total_pnl>=0?"text-profit":"text-loss"},[e("span",{staticClass:"pnl-value"},[t._v(t._s(t.formatPnl(s.total_pnl)))]),e("span",{staticClass:"roi-text"},[t._v("("+t._s(s.roi>=0?"+":"")+t._s(s.roi)+"%)")])]),e("div",{staticClass:"pnl-detail text-muted"},[e("span",[t._v(t._s(t.$t("systemOverview.realized")||"Real")+": "+t._s(t.formatPnl(s.total_realized_pnl)))]),e("span",{staticStyle:{"margin-left":"8px"}},[t._v(t._s(t.$t("systemOverview.unrealized")||"Unreal")+": "+t._s(t.formatPnl(s.total_unrealized_pnl)))])])]}},{key:"positionInfo",fn:function(t,a){return[e("a-badge",{attrs:{count:a.position_count,numberStyle:{backgroundColor:a.position_count>0?"#52c41a":"#d9d9d9"}}})]}},{key:"tradeInfo",fn:function(a){return[e("span",[t._v(t._s(a||0))])]}},{key:"indicatorInfo",fn:function(a){return[a?e("a-tooltip",{attrs:{title:a}},[e("span",{staticClass:"indicator-name"},[t._v(t._s(t.truncate(a,16)))])]):e("span",{staticClass:"text-muted"},[t._v("-")])]}},{key:"exchangeInfo",fn:function(a){return[a?e("span",{staticClass:"exchange-name"},[t._v(t._s(a))]):e("span",{staticClass:"text-muted"},[t._v("-")])]}},{key:"timeframeInfo",fn:function(a){return[a?e("a-tag",{attrs:{size:"small"}},[t._v(t._s(a))]):e("span",{staticClass:"text-muted"},[t._v("-")])]}},{key:"leverageInfo",fn:function(a){return[a>1?e("span",{staticStyle:{color:"#fa8c16","font-weight":"600"}},[t._v(t._s(a)+"x")]):e("span",[t._v(t._s(a||1)+"x")])]}},{key:"createdAtInfo",fn:function(a){return[a?e("span",[t._v(t._s(t.formatTime(a)))]):e("span",{staticClass:"text-muted"},[t._v("-")])]}}])})],1)],1),e("a-tab-pane",{key:"orders",attrs:{tab:t.$t("adminOrders.tabTitle")||"Order List"}},[t.orderSummary?e("div",{staticClass:"summary-cards"},[e("div",{staticClass:"summary-card"},[e("div",{staticClass:"summary-icon",staticStyle:{background:"linear-gradient(135deg, #667eea, #764ba2)"}},[e("a-icon",{attrs:{type:"file-text"}})],1),e("div",{staticClass:"summary-info"},[e("div",{staticClass:"summary-value"},[t._v(t._s(t.orderSummary.total_orders||0))]),e("div",{staticClass:"summary-label"},[t._v(t._s(t.$t("adminOrders.totalOrders")||"Total Orders"))])])]),e("div",{staticClass:"summary-card"},[e("div",{staticClass:"summary-icon",staticStyle:{background:"linear-gradient(135deg, #11998e, #38ef7d)"}},[e("a-icon",{attrs:{type:"check-circle"}})],1),e("div",{staticClass:"summary-info"},[e("div",{staticClass:"summary-value"},[t._v(t._s(t.orderSummary.paid_orders||0))]),e("div",{staticClass:"summary-label"},[t._v(t._s(t.$t("adminOrders.paidOrders")||"Paid"))])])]),e("div",{staticClass:"summary-card"},[e("div",{staticClass:"summary-icon",staticStyle:{background:"linear-gradient(135deg, #f093fb, #f5576c)"}},[e("a-icon",{attrs:{type:"clock-circle"}})],1),e("div",{staticClass:"summary-info"},[e("div",{staticClass:"summary-value"},[t._v(t._s(t.orderSummary.pending_orders||0))]),e("div",{staticClass:"summary-label"},[t._v(t._s(t.$t("adminOrders.pendingOrders")||"Pending"))])])]),e("div",{staticClass:"summary-card"},[e("div",{staticClass:"summary-icon",staticStyle:{background:"linear-gradient(135deg, #fa709a, #fee140)"}},[e("a-icon",{attrs:{type:"dollar"}})],1),e("div",{staticClass:"summary-info"},[e("div",{staticClass:"summary-value"},[t._v(t._s(t.formatNumber(t.orderSummary.total_revenue))+" "),e("span",{staticStyle:{"font-size":"13px",color:"#999"}},[t._v("USDT")])]),e("div",{staticClass:"summary-label"},[t._v(t._s(t.$t("adminOrders.totalRevenue")||"Total Revenue"))])])])]):t._e(),e("div",{staticClass:"toolbar"},[e("div",{staticClass:"toolbar-left"},[e("a-button",{on:{click:t.loadOrders}},[e("a-icon",{attrs:{type:"reload"}}),t._v(" "+t._s(t.$t("common.refresh")||"Refresh")+" ")],1),e("a-select",{staticStyle:{width:"140px"},on:{change:t.handleOrderFilterChange},model:{value:t.orderStatusFilter,callback:function(e){t.orderStatusFilter=e},expression:"orderStatusFilter"}},[e("a-select-option",{attrs:{value:"all"}},[t._v(t._s(t.$t("adminOrders.filterAll")||"All Status"))]),e("a-select-option",{attrs:{value:"pending"}},[t._v(t._s(t.$t("adminOrders.filterPending")||"Pending"))]),e("a-select-option",{attrs:{value:"paid"}},[t._v(t._s(t.$t("adminOrders.filterPaid")||"Paid"))]),e("a-select-option",{attrs:{value:"confirmed"}},[t._v(t._s(t.$t("adminOrders.filterConfirmed")||"Confirmed"))]),e("a-select-option",{attrs:{value:"expired"}},[t._v(t._s(t.$t("adminOrders.filterExpired")||"Expired"))])],1)],1),e("div",{staticClass:"toolbar-right"},[e("a-input-search",{staticStyle:{width:"280px"},attrs:{placeholder:t.$t("adminOrders.searchPlaceholder")||"Search by username/email",allowClear:""},on:{search:t.handleOrderSearch,pressEnter:t.handleOrderSearch},model:{value:t.orderSearchKeyword,callback:function(e){t.orderSearchKeyword=e},expression:"orderSearchKeyword"}})],1)]),e("a-card",{staticClass:"user-table-card",attrs:{bordered:!1}},[e("a-table",{attrs:{columns:t.orderColumns,dataSource:t.orders,loading:t.orderLoading,pagination:t.orderPagination,rowKey:function(t){return t.order_type+"-"+t.id},scroll:{x:1400}},on:{change:t.handleOrderTableChange},scopedSlots:t._u([{key:"orderUserInfo",fn:function(a,s){return[e("a-tooltip",{attrs:{title:(s.nickname||s.username||"-")+" ("+(s.user_email||"")+")"}},[e("span",{staticClass:"user-cell"},[e("a-avatar",{style:{backgroundColor:t.getUserColor(s.user_id),fontSize:"11px",marginRight:"6px"},attrs:{size:"small"}},[t._v(" "+t._s((s.nickname||s.username||"?").charAt(0).toUpperCase())+" ")]),e("span",{staticClass:"user-name"},[t._v(t._s(t.truncate(s.nickname||s.username||"-",10)))])],1)])]}},{key:"orderTypeInfo",fn:function(a){return[e("a-tag",{attrs:{color:"usdt"===a?"green":"blue"}},[t._v(" "+t._s("usdt"===a?"USDT":"Mock")+" ")])]}},{key:"planInfo",fn:function(a){return[e("a-tag",{attrs:{color:"lifetime"===a?"gold":"yearly"===a?"purple":"cyan"}},[t._v(" "+t._s("lifetime"===a?t.$t("adminOrders.lifetime")||"Lifetime":"yearly"===a?t.$t("adminOrders.yearly")||"Yearly":t.$t("adminOrders.monthly")||"Monthly")+" ")])]}},{key:"amountInfo",fn:function(a,s){return[e("span",{staticStyle:{"font-weight":"600"}},[t._v(t._s(a))]),e("span",{staticClass:"text-muted",staticStyle:{"margin-left":"4px"}},[t._v(t._s(s.currency))])]}},{key:"orderStatusInfo",fn:function(a){return[e("a-tag",{attrs:{color:t.getOrderStatusColor(a)}},[t._v(t._s(t.getOrderStatusLabel(a)))])]}},{key:"chainInfo",fn:function(a){return[a?e("span",[t._v(t._s(a))]):e("span",{staticClass:"text-muted"},[t._v("-")])]}},{key:"addressInfo",fn:function(a){return[a?e("a-tooltip",{attrs:{title:a}},[e("span",{staticClass:"address-text"},[t._v(t._s(t.truncate(a,12)))])]):e("span",{staticClass:"text-muted"},[t._v("-")])]}},{key:"txHashInfo",fn:function(a){return[a?e("a-tooltip",{attrs:{title:a}},[e("span",{staticClass:"hash-text"},[t._v(t._s(t.truncate(a,14)))])]):e("span",{staticClass:"text-muted"},[t._v("-")])]}},{key:"orderCreatedAt",fn:function(a){return[a?e("span",[t._v(t._s(t.formatTime(a)))]):e("span",{staticClass:"text-muted"},[t._v("-")])]}}])})],1)],1),e("a-tab-pane",{key:"aiStats",attrs:{tab:t.$t("adminAiStats.tabTitle")||"AI Analysis"}},[t.aiStatsSummary?e("div",{staticClass:"summary-cards"},[e("div",{staticClass:"summary-card"},[e("div",{staticClass:"summary-icon",staticStyle:{background:"linear-gradient(135deg, #667eea, #764ba2)"}},[e("a-icon",{attrs:{type:"thunderbolt"}})],1),e("div",{staticClass:"summary-info"},[e("div",{staticClass:"summary-value"},[t._v(t._s(t.aiStatsSummary.total_analyses||0))]),e("div",{staticClass:"summary-label"},[t._v(t._s(t.$t("adminAiStats.totalAnalyses")||"Total Analyses"))])])]),e("div",{staticClass:"summary-card"},[e("div",{staticClass:"summary-icon",staticStyle:{background:"linear-gradient(135deg, #11998e, #38ef7d)"}},[e("a-icon",{attrs:{type:"team"}})],1),e("div",{staticClass:"summary-info"},[e("div",{staticClass:"summary-value"},[t._v(t._s(t.aiStatsSummary.unique_users||0))]),e("div",{staticClass:"summary-label"},[t._v(t._s(t.$t("adminAiStats.activeUsers")||"Active Users"))])])]),e("div",{staticClass:"summary-card"},[e("div",{staticClass:"summary-icon",staticStyle:{background:"linear-gradient(135deg, #f093fb, #f5576c)"}},[e("a-icon",{attrs:{type:"stock"}})],1),e("div",{staticClass:"summary-info"},[e("div",{staticClass:"summary-value"},[t._v(t._s(t.aiStatsSummary.unique_symbols||0))]),e("div",{staticClass:"summary-label"},[t._v(t._s(t.$t("adminAiStats.uniqueSymbols")||"Symbols Analyzed"))])])]),e("div",{staticClass:"summary-card"},[e("div",{staticClass:"summary-icon",staticStyle:{background:"linear-gradient(135deg, #fa709a, #fee140)"}},[e("a-icon",{attrs:{type:"like"}})],1),e("div",{staticClass:"summary-info"},[e("div",{staticClass:"summary-value"},[t._v(" "+t._s(t.aiStatsSummary.correct_count||0)+" "),e("span",{staticStyle:{"font-size":"13px",color:"#999"}},[t._v("/ "+t._s(t.aiStatsSummary.total_memory||0))])]),e("div",{staticClass:"summary-label"},[t._v(t._s(t.$t("adminAiStats.accuracy")||"Correct / Verified"))])])])]):t._e(),e("div",{staticClass:"toolbar"},[e("div",{staticClass:"toolbar-left"},[e("a-button",{on:{click:t.loadAiStats}},[e("a-icon",{attrs:{type:"reload"}}),t._v(" "+t._s(t.$t("common.refresh")||"Refresh")+" ")],1)],1),e("div",{staticClass:"toolbar-right"},[e("a-input-search",{staticStyle:{width:"280px"},attrs:{placeholder:t.$t("adminAiStats.searchPlaceholder")||"Search by username",allowClear:""},on:{search:t.handleAiStatsSearch,pressEnter:t.handleAiStatsSearch},model:{value:t.aiStatsSearchKeyword,callback:function(e){t.aiStatsSearchKeyword=e},expression:"aiStatsSearchKeyword"}})],1)]),e("a-card",{staticClass:"user-table-card",staticStyle:{"margin-bottom":"20px"},attrs:{bordered:!1}},[e("h4",{staticStyle:{"margin-bottom":"12px",color:"#1e3a5f","font-weight":"600"}},[e("a-icon",{staticStyle:{"margin-right":"8px"},attrs:{type:"bar-chart"}}),t._v(" "+t._s(t.$t("adminAiStats.userStatsTitle")||"Per-User Statistics")+" ")],1),e("a-table",{attrs:{columns:t.aiUserColumns,dataSource:t.aiUserStats,loading:t.aiStatsLoading,pagination:t.aiStatsPagination,rowKey:function(t){return t.user_id}},on:{change:t.handleAiStatsTableChange},scopedSlots:t._u([{key:"aiUserInfo",fn:function(a,s){return[e("a-tooltip",{attrs:{title:(s.nickname||s.username||"-")+" ("+(s.email||"")+")"}},[e("span",{staticClass:"user-cell"},[e("a-avatar",{style:{backgroundColor:t.getUserColor(s.user_id),fontSize:"11px",marginRight:"6px"},attrs:{size:"small"}},[t._v(" "+t._s((s.nickname||s.username||"?").charAt(0).toUpperCase())+" ")]),e("span",{staticClass:"user-name"},[t._v(t._s(t.truncate(s.nickname||s.username||"-",10)))])],1)])]}},{key:"analysisCountInfo",fn:function(a){return[e("span",{staticStyle:{"font-weight":"600",color:"#1890ff"}},[t._v(t._s(a||0))])]}},{key:"accuracyInfo",fn:function(a,s){return[e("span",{staticClass:"text-profit"},[t._v(t._s(s.correct||0))]),e("span",{staticClass:"text-muted"},[t._v(" / ")]),e("span",{staticClass:"text-loss"},[t._v(t._s(s.incorrect||0))])]}},{key:"feedbackInfo",fn:function(a,s){return[e("a-tooltip",{attrs:{title:(t.$t("adminAiStats.helpful")||"Helpful")+" / "+(t.$t("adminAiStats.notHelpful")||"Not Helpful")}},[e("span",{staticStyle:{color:"#52c41a"}},[e("a-icon",{attrs:{type:"like"}}),t._v(" "+t._s(s.helpful||0))],1),e("span",{staticClass:"text-muted"},[t._v(" / ")]),e("span",{staticStyle:{color:"#ff4d4f"}},[e("a-icon",{attrs:{type:"dislike"}}),t._v(" "+t._s(s.not_helpful||0))],1)])]}},{key:"lastAnalysisAt",fn:function(a){return[a?e("span",[t._v(t._s(t.formatTime(a)))]):e("span",{staticClass:"text-muted"},[t._v("-")])]}}])})],1),e("a-card",{staticClass:"user-table-card",attrs:{bordered:!1}},[e("h4",{staticStyle:{"margin-bottom":"12px",color:"#1e3a5f","font-weight":"600"}},[e("a-icon",{staticStyle:{"margin-right":"8px"},attrs:{type:"history"}}),t._v(" "+t._s(t.$t("adminAiStats.recentTitle")||"Recent Analysis Records")+" ")],1),e("a-table",{attrs:{columns:t.aiRecentColumns,dataSource:t.aiRecentRecords,loading:t.aiStatsLoading,pagination:!1,rowKey:function(t){return t.id},size:"small"},scopedSlots:t._u([{key:"recentUserInfo",fn:function(a,s){return[e("span",{staticClass:"user-cell"},[e("a-avatar",{style:{backgroundColor:t.getUserColor(s.user_id),fontSize:"11px",marginRight:"6px"},attrs:{size:"small"}},[t._v(" "+t._s((s.nickname||s.username||"?").charAt(0).toUpperCase())+" ")]),e("span",{staticClass:"user-name"},[t._v(t._s(t.truncate(s.nickname||s.username||"-",8)))])],1)]}},{key:"recentStatusInfo",fn:function(a){return[e("a-tag",{attrs:{color:"completed"===a?"green":"failed"===a?"red":"blue"}},[t._v(" "+t._s(a)+" ")])]}},{key:"recentCreatedAt",fn:function(a){return[a?e("span",[t._v(t._s(t.formatTime(a)))]):e("span",{staticClass:"text-muted"},[t._v("-")])]}}])})],1)],1)],1),e("a-modal",{attrs:{title:t.isEdit?t.$t("userManage.editUser")||"Edit User":t.$t("userManage.createUser")||"Create User",confirmLoading:t.modalLoading},on:{ok:t.handleModalOk,cancel:t.handleModalCancel},model:{value:t.modalVisible,callback:function(e){t.modalVisible=e},expression:"modalVisible"}},[e("a-form",{attrs:{form:t.form,layout:"vertical"}},[e("a-form-item",{attrs:{label:t.$t("userManage.username")||"Username"}},[e("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["username",{rules:[{required:!t.isEdit,message:t.$t("userManage.usernameRequired")||"Please enter username"}]}],expression:"['username', {\n            rules: [{ required: !isEdit, message: $t('userManage.usernameRequired') || 'Please enter username' }]\n          }]"}],attrs:{disabled:t.isEdit,placeholder:t.$t("userManage.usernamePlaceholder")||"Enter username"}},[e("a-icon",{attrs:{slot:"prefix",type:"user"},slot:"prefix"})],1)],1),t.isEdit?t._e():e("a-form-item",{attrs:{label:t.$t("userManage.password")||"Password"}},[e("a-input-password",{directives:[{name:"decorator",rawName:"v-decorator",value:["password",{rules:[{required:!0,message:t.$t("userManage.passwordRequired")||"Please enter password"},{min:6,message:t.$t("userManage.passwordMin")||"Password must be at least 6 characters"}]}],expression:"['password', {\n            rules: [\n              { required: true, message: $t('userManage.passwordRequired') || 'Please enter password' },\n              { min: 6, message: $t('userManage.passwordMin') || 'Password must be at least 6 characters' }\n            ]\n          }]"}],attrs:{placeholder:t.$t("userManage.passwordPlaceholder")||"Enter password (min 6 characters)"}},[e("a-icon",{attrs:{slot:"prefix",type:"lock"},slot:"prefix"})],1)],1),e("a-form-item",{attrs:{label:t.$t("userManage.nickname")||"Nickname"}},[e("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["nickname"],expression:"['nickname']"}],attrs:{placeholder:t.$t("userManage.nicknamePlaceholder")||"Enter nickname"}},[e("a-icon",{attrs:{slot:"prefix",type:"smile"},slot:"prefix"})],1)],1),e("a-form-item",{attrs:{label:t.$t("userManage.email")||"Email"}},[e("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["email",{rules:[{type:"email",message:t.$t("userManage.emailInvalid")||"Invalid email format"}]}],expression:"['email', {\n            rules: [{ type: 'email', message: $t('userManage.emailInvalid') || 'Invalid email format' }]\n          }]"}],attrs:{placeholder:t.$t("userManage.emailPlaceholder")||"Enter email"}},[e("a-icon",{attrs:{slot:"prefix",type:"mail"},slot:"prefix"})],1)],1),e("a-form-item",{attrs:{label:t.$t("userManage.role")||"Role"}},[e("a-select",{directives:[{name:"decorator",rawName:"v-decorator",value:["role",{initialValue:"user"}],expression:"['role', { initialValue: 'user' }]"}],attrs:{placeholder:t.$t("userManage.rolePlaceholder")||"Select role"}},t._l(t.roles,function(a){return e("a-select-option",{key:a.id,attrs:{value:a.id}},[t._v(" "+t._s(t.getRoleLabel(a.id))+" ")])}),1)],1),t.isEdit?e("a-form-item",{attrs:{label:t.$t("userManage.status")||"Status"}},[e("a-select",{directives:[{name:"decorator",rawName:"v-decorator",value:["status",{initialValue:"active"}],expression:"['status', { initialValue: 'active' }]"}],attrs:{placeholder:t.$t("userManage.statusPlaceholder")||"Select status"}},[e("a-select-option",{attrs:{value:"active"}},[t._v(t._s(t.$t("userManage.active")||"Active"))]),e("a-select-option",{attrs:{value:"disabled"}},[t._v(t._s(t.$t("userManage.disabled")||"Disabled"))])],1)],1):t._e()],1)],1),e("a-modal",{attrs:{title:t.$t("userManage.resetPassword")||"Reset Password",confirmLoading:t.resetPasswordLoading},on:{ok:t.handleResetPassword},model:{value:t.resetPasswordVisible,callback:function(e){t.resetPasswordVisible=e},expression:"resetPasswordVisible"}},[e("a-form",{attrs:{form:t.resetPasswordForm,layout:"vertical"}},[e("a-alert",{staticStyle:{"margin-bottom":"16px"},attrs:{message:t.$t("userManage.resetPasswordWarning")||"This will reset the user's password",type:"warning",showIcon:""}}),e("a-form-item",{attrs:{label:t.$t("userManage.newPassword")||"New Password"}},[e("a-input-password",{directives:[{name:"decorator",rawName:"v-decorator",value:["new_password",{rules:[{required:!0,message:t.$t("userManage.passwordRequired")||"Please enter new password"},{min:6,message:t.$t("userManage.passwordMin")||"Password must be at least 6 characters"}]}],expression:"['new_password', {\n            rules: [\n              { required: true, message: $t('userManage.passwordRequired') || 'Please enter new password' },\n              { min: 6, message: $t('userManage.passwordMin') || 'Password must be at least 6 characters' }\n            ]\n          }]"}],attrs:{placeholder:t.$t("userManage.newPasswordPlaceholder")||"Enter new password"}},[e("a-icon",{attrs:{slot:"prefix",type:"lock"},slot:"prefix"})],1)],1)],1)],1),e("a-modal",{attrs:{title:(t.$t("userManage.adjustCredits")||"Adjust Credits")+(t.creditsEditingUser?" - ".concat(t.creditsEditingUser.username):""),confirmLoading:t.creditsLoading},on:{ok:t.handleSetCredits},model:{value:t.creditsModalVisible,callback:function(e){t.creditsModalVisible=e},expression:"creditsModalVisible"}},[e("a-form",{attrs:{layout:"vertical"}},[t.creditsEditingUser?e("div",{staticClass:"current-credits-info"},[e("span",{staticClass:"label"},[t._v(t._s(t.$t("userManage.currentCredits")||"Current Credits")+":")]),e("span",{staticClass:"value"},[t._v(t._s(t.formatCredits(t.creditsEditingUser.credits)))])]):t._e(),e("a-form-item",{attrs:{label:t.$t("userManage.newCredits")||"New Credits"}},[e("a-input-number",{staticStyle:{width:"100%"},attrs:{min:0,precision:2,placeholder:t.$t("userManage.enterCredits")||"Enter new credits amount"},model:{value:t.newCredits,callback:function(e){t.newCredits=e},expression:"newCredits"}})],1),e("a-form-item",{attrs:{label:t.$t("userManage.remark")||"Remark"}},[e("a-input",{attrs:{placeholder:t.$t("userManage.remarkPlaceholder")||"Optional remark"},model:{value:t.creditsRemark,callback:function(e){t.creditsRemark=e},expression:"creditsRemark"}})],1)],1)],1),e("a-modal",{attrs:{title:(t.$t("userManage.setVip")||"Set VIP")+(t.vipEditingUser?" - ".concat(t.vipEditingUser.username):""),confirmLoading:t.vipLoading},on:{ok:t.handleSetVip},model:{value:t.vipModalVisible,callback:function(e){t.vipModalVisible=e},expression:"vipModalVisible"}},[e("a-form",{attrs:{layout:"vertical"}},[t.vipEditingUser&&t.vipEditingUser.vip_expires_at?e("div",{staticClass:"current-vip-info"},[e("span",{staticClass:"label"},[t._v(t._s(t.$t("userManage.currentVip")||"Current VIP")+":")]),e("span",{staticClass:"value",class:t.isVipActive(t.vipEditingUser.vip_expires_at)?"active":"expired"},[t._v(" "+t._s(t.isVipActive(t.vipEditingUser.vip_expires_at)?(t.$t("userManage.vipActive")||"Active")+" (".concat(t.formatDate(t.vipEditingUser.vip_expires_at),")"):t.$t("userManage.vipExpired")||"Expired")+" ")])]):t._e(),e("a-form-item",{attrs:{label:t.$t("userManage.vipDays")||"VIP Days"}},[e("a-select",{staticStyle:{width:"100%"},model:{value:t.vipDays,callback:function(e){t.vipDays=e},expression:"vipDays"}},[e("a-select-option",{attrs:{value:0}},[t._v(t._s(t.$t("userManage.cancelVip")||"Cancel VIP"))]),e("a-select-option",{attrs:{value:7}},[t._v("7 "+t._s(t.$t("userManage.days")||"days"))]),e("a-select-option",{attrs:{value:30}},[t._v("30 "+t._s(t.$t("userManage.days")||"days"))]),e("a-select-option",{attrs:{value:90}},[t._v("90 "+t._s(t.$t("userManage.days")||"days"))]),e("a-select-option",{attrs:{value:180}},[t._v("180 "+t._s(t.$t("userManage.days")||"days"))]),e("a-select-option",{attrs:{value:365}},[t._v("365 "+t._s(t.$t("userManage.days")||"days"))]),e("a-select-option",{attrs:{value:-1}},[t._v(t._s(t.$t("userManage.customDate")||"Custom Date"))])],1)],1),-1===t.vipDays?e("a-form-item",{attrs:{label:t.$t("userManage.vipExpiresAt")||"VIP Expires At"}},[e("a-date-picker",{staticStyle:{width:"100%"},attrs:{showTime:"",format:"YYYY-MM-DD HH:mm:ss"},model:{value:t.vipCustomDate,callback:function(e){t.vipCustomDate=e},expression:"vipCustomDate"}})],1):t._e(),e("a-form-item",{attrs:{label:t.$t("userManage.remark")||"Remark"}},[e("a-input",{attrs:{placeholder:t.$t("userManage.remarkPlaceholder")||"Optional remark"},model:{value:t.vipRemark,callback:function(e){t.vipRemark=e},expression:"vipRemark"}})],1)],1)],1)],1)},r=[],i=a(81127),n=a(56252),o=a(76338),l=(a(2892),a(84841)),d=a(55434),c=a(95353),u={name:"UserManage",mixins:[d.t],data:function(){return{activeTab:"users",loading:!1,users:[],roles:[],searchKeyword:"",pagination:{current:1,pageSize:10,total:0},modalVisible:!1,modalLoading:!1,isEdit:!1,editingUser:null,resetPasswordVisible:!1,resetPasswordLoading:!1,resetPasswordUserId:null,creditsModalVisible:!1,creditsLoading:!1,creditsEditingUser:null,newCredits:0,creditsRemark:"",vipModalVisible:!1,vipLoading:!1,vipEditingUser:null,vipDays:30,vipCustomDate:null,vipRemark:"",strategyLoading:!1,systemStrategies:[],strategySummary:null,strategyStatusFilter:"all",strategySearchKeyword:"",strategyPagination:{current:1,pageSize:20,total:0},strategiesLoaded:!1,orderLoading:!1,orders:[],orderSummary:null,orderStatusFilter:"all",orderSearchKeyword:"",orderPagination:{current:1,pageSize:20,total:0},ordersLoaded:!1,aiStatsLoading:!1,aiUserStats:[],aiRecentRecords:[],aiStatsSummary:null,aiStatsSearchKeyword:"",aiStatsPagination:{current:1,pageSize:20,total:0},aiStatsLoaded:!1}},computed:(0,o.A)((0,o.A)({},(0,c.L8)(["userInfo"])),{},{isDarkTheme:function(){return"dark"===this.navTheme||"realdark"===this.navTheme},currentUserId:function(){var t;return null===(t=this.userInfo)||void 0===t?void 0:t.id},columns:function(){return[{title:"ID",dataIndex:"id",width:60},{title:this.$t("userManage.username")||"Username",dataIndex:"username",width:120},{title:this.$t("userManage.nickname")||"Nickname",dataIndex:"nickname",width:100},{title:this.$t("userManage.email")||"Email",dataIndex:"email",width:180},{title:this.$t("userManage.role")||"Role",dataIndex:"role",width:90,scopedSlots:{customRender:"role"}},{title:this.$t("userManage.credits")||"Credits",dataIndex:"credits",width:100,scopedSlots:{customRender:"credits"}},{title:"VIP",dataIndex:"vip_expires_at",width:120,scopedSlots:{customRender:"vip_expires_at"}},{title:this.$t("userManage.status")||"Status",dataIndex:"status",width:90,scopedSlots:{customRender:"status"}},{title:this.$t("userManage.lastLogin")||"Last Login",dataIndex:"last_login_at",width:150,scopedSlots:{customRender:"last_login_at"}},{title:this.$t("common.actions")||"Actions",dataIndex:"action",width:180,scopedSlots:{customRender:"action"}}]},strategyColumns:function(){return[{title:"ID",dataIndex:"id",width:60,fixed:"left"},{title:this.$t("systemOverview.colUser")||"User",dataIndex:"username",width:110,fixed:"left",scopedSlots:{customRender:"userInfo"}},{title:this.$t("systemOverview.colStrategy")||"Strategy",dataIndex:"strategy_name",width:160,ellipsis:!0},{title:this.$t("systemOverview.colStatus")||"Status",dataIndex:"status",width:100,scopedSlots:{customRender:"strategyStatus"}},{title:this.$t("systemOverview.colSymbol")||"Symbol",dataIndex:"symbol",width:140,scopedSlots:{customRender:"symbolInfo"}},{title:this.$t("systemOverview.colCapital")||"Capital",dataIndex:"initial_capital",width:110,scopedSlots:{customRender:"capitalInfo"}},{title:this.$t("systemOverview.colPnl")||"PnL / ROI",dataIndex:"total_pnl",width:200,scopedSlots:{customRender:"pnlInfo"}},{title:this.$t("systemOverview.colPositions")||"Pos",dataIndex:"position_count",width:70,align:"center",scopedSlots:{customRender:"positionInfo"}},{title:this.$t("systemOverview.colTrades")||"Trades",dataIndex:"trade_count",width:80,align:"center",scopedSlots:{customRender:"tradeInfo"}},{title:this.$t("systemOverview.colIndicator")||"Indicator",dataIndex:"indicator_name",width:130,scopedSlots:{customRender:"indicatorInfo"}},{title:this.$t("systemOverview.colExchange")||"Exchange",dataIndex:"exchange_name",width:100,scopedSlots:{customRender:"exchangeInfo"}},{title:this.$t("systemOverview.colTimeframe")||"TF",dataIndex:"timeframe",width:70,align:"center",scopedSlots:{customRender:"timeframeInfo"}},{title:this.$t("systemOverview.colLeverage")||"Lev",dataIndex:"leverage",width:70,align:"center",scopedSlots:{customRender:"leverageInfo"}},{title:this.$t("systemOverview.colCreatedAt")||"Created",dataIndex:"created_at",width:150,scopedSlots:{customRender:"createdAtInfo"}}]},orderColumns:function(){return[{title:this.$t("adminOrders.colUser")||"User",dataIndex:"username",width:120,scopedSlots:{customRender:"orderUserInfo"}},{title:this.$t("adminOrders.colType")||"Type",dataIndex:"order_type",width:80,scopedSlots:{customRender:"orderTypeInfo"}},{title:this.$t("adminOrders.colPlan")||"Plan",dataIndex:"plan",width:100,scopedSlots:{customRender:"planInfo"}},{title:this.$t("adminOrders.colAmount")||"Amount",dataIndex:"amount",width:120,scopedSlots:{customRender:"amountInfo"}},{title:this.$t("adminOrders.colStatus")||"Status",dataIndex:"status",width:100,scopedSlots:{customRender:"orderStatusInfo"}},{title:this.$t("adminOrders.colChain")||"Chain",dataIndex:"chain",width:80,scopedSlots:{customRender:"chainInfo"}},{title:this.$t("adminOrders.colAddress")||"Address",dataIndex:"address",width:140,scopedSlots:{customRender:"addressInfo"}},{title:this.$t("adminOrders.colTxHash")||"Tx Hash",dataIndex:"tx_hash",width:160,scopedSlots:{customRender:"txHashInfo"}},{title:this.$t("adminOrders.colCreatedAt")||"Created",dataIndex:"created_at",width:150,scopedSlots:{customRender:"orderCreatedAt"}}]},aiUserColumns:function(){return[{title:this.$t("adminAiStats.colUser")||"User",dataIndex:"username",width:140,scopedSlots:{customRender:"aiUserInfo"}},{title:this.$t("adminAiStats.colAnalysisCount")||"Analyses",dataIndex:"analysis_count",width:100,align:"center",scopedSlots:{customRender:"analysisCountInfo"},sorter:function(t,e){return t.analysis_count-e.analysis_count},defaultSortOrder:"descend"},{title:this.$t("adminAiStats.colSymbols")||"Symbols",dataIndex:"symbol_count",width:90,align:"center"},{title:this.$t("adminAiStats.colMarkets")||"Markets",dataIndex:"market_count",width:90,align:"center"},{title:this.$t("adminAiStats.colAccuracy")||"Correct / Wrong",dataIndex:"correct",width:130,align:"center",scopedSlots:{customRender:"accuracyInfo"}},{title:this.$t("adminAiStats.colFeedback")||"Feedback",dataIndex:"helpful",width:130,align:"center",scopedSlots:{customRender:"feedbackInfo"}},{title:this.$t("adminAiStats.colLastAnalysis")||"Last Analysis",dataIndex:"last_analysis_at",width:160,scopedSlots:{customRender:"lastAnalysisAt"}}]},aiRecentColumns:function(){return[{title:"ID",dataIndex:"id",width:60},{title:this.$t("adminAiStats.colUser")||"User",dataIndex:"username",width:120,scopedSlots:{customRender:"recentUserInfo"}},{title:this.$t("adminAiStats.colMarket")||"Market",dataIndex:"market",width:80},{title:this.$t("adminAiStats.colSymbol")||"Symbol",dataIndex:"symbol",width:120},{title:this.$t("adminAiStats.colModel")||"Model",dataIndex:"model",width:140,ellipsis:!0},{title:this.$t("adminAiStats.colStatus")||"Status",dataIndex:"status",width:100,scopedSlots:{customRender:"recentStatusInfo"}},{title:this.$t("adminAiStats.colCreatedAt")||"Time",dataIndex:"created_at",width:160,scopedSlots:{customRender:"recentCreatedAt"}}]}}),beforeCreate:function(){this.form=this.$form.createForm(this),this.resetPasswordForm=this.$form.createForm(this,{name:"resetPassword"})},mounted:function(){this.loadUsers(),this.loadRoles()},methods:{handleTabChange:function(t){"strategies"!==t||this.strategiesLoaded||this.loadSystemStrategies(),"orders"!==t||this.ordersLoaded||this.loadOrders(),"aiStats"!==t||this.aiStatsLoaded||this.loadAiStats()},loadSystemStrategies:function(){var t=this;return(0,n.A)((0,i.A)().m(function e(){var a;return(0,i.A)().w(function(e){while(1)switch(e.p=e.n){case 0:return t.strategyLoading=!0,e.p=1,e.n=2,(0,l.DK)({page:t.strategyPagination.current,page_size:t.strategyPagination.pageSize,status:"all"===t.strategyStatusFilter?"":t.strategyStatusFilter,search:t.strategySearchKeyword||""});case 2:a=e.v,1===a.code?(t.systemStrategies=a.data.items||[],t.strategyPagination.total=a.data.total||0,t.strategySummary=a.data.summary||{},t.strategiesLoaded=!0):t.$message.error(a.msg||"Failed to load strategies"),e.n=4;break;case 3:e.p=3,e.v,t.$message.error("Failed to load system strategies");case 4:return e.p=4,t.strategyLoading=!1,e.f(4);case 5:return e.a(2)}},e,null,[[1,3,4,5]])}))()},handleStrategySearch:function(){this.strategyPagination.current=1,this.loadSystemStrategies()},handleStrategyFilterChange:function(){this.strategyPagination.current=1,this.loadSystemStrategies()},handleStrategyTableChange:function(t){this.strategyPagination.current=t.current,this.strategyPagination.pageSize=t.pageSize,this.loadSystemStrategies()},getUserColor:function(t){var e=["#1890ff","#722ed1","#13c2c2","#fa8c16","#eb2f96","#52c41a","#2f54eb","#faad14"];return e[(t||0)%e.length]},formatNumber:function(t){return t||0===t?Number(t).toLocaleString("en-US",{minimumFractionDigits:0,maximumFractionDigits:2}):"0"},formatPnl:function(t){if(!t&&0!==t)return"0";var e=Number(t),a=e>=0?"+":"";return a+e.toLocaleString("en-US",{minimumFractionDigits:2,maximumFractionDigits:4})},truncate:function(t,e){return t?t.length>e?t.substring(0,e)+"...":t:""},loadUsers:function(){var t=this;return(0,n.A)((0,i.A)().m(function e(){var a;return(0,i.A)().w(function(e){while(1)switch(e.p=e.n){case 0:return t.loading=!0,e.p=1,e.n=2,(0,l.aU)({page:t.pagination.current,page_size:t.pagination.pageSize,search:t.searchKeyword||""});case 2:a=e.v,1===a.code?(t.users=a.data.items||[],t.pagination.total=a.data.total||0):t.$message.error(a.msg||"Failed to load users"),e.n=4;break;case 3:e.p=3,e.v,t.$message.error("Failed to load users");case 4:return e.p=4,t.loading=!1,e.f(4);case 5:return e.a(2)}},e,null,[[1,3,4,5]])}))()},handleSearch:function(){this.pagination.current=1,this.loadUsers()},loadRoles:function(){var t=this;return(0,n.A)((0,i.A)().m(function e(){var a;return(0,i.A)().w(function(e){while(1)switch(e.p=e.n){case 0:return e.p=0,e.n=1,(0,l.O0)();case 1:a=e.v,1===a.code&&(t.roles=a.data.roles||[]),e.n=3;break;case 2:e.p=2,e.v;case 3:return e.a(2)}},e,null,[[0,2]])}))()},handleTableChange:function(t){this.pagination.current=t.current,this.pagination.pageSize=t.pageSize,this.loadUsers()},showCreateModal:function(){var t=this;this.isEdit=!1,this.editingUser=null,this.modalVisible=!0,this.$nextTick(function(){t.form.resetFields()})},showEditModal:function(t){var e=this;this.isEdit=!0,this.editingUser=t,this.modalVisible=!0,this.$nextTick(function(){e.form.setFieldsValue({username:t.username,nickname:t.nickname,email:t.email,role:t.role,status:t.status})})},handleModalCancel:function(){this.modalVisible=!1,this.form.resetFields()},handleModalOk:function(){var t=this;this.form.validateFields(function(){var e=(0,n.A)((0,i.A)().m(function e(a,s){var r;return(0,i.A)().w(function(e){while(1)switch(e.p=e.n){case 0:if(!a){e.n=1;break}return e.a(2);case 1:if(t.modalLoading=!0,e.p=2,!t.isEdit){e.n=4;break}return e.n=3,(0,l.TK)(t.editingUser.id,{nickname:s.nickname,email:s.email,role:s.role,status:s.status});case 3:r=e.v,e.n=6;break;case 4:return e.n=5,(0,l.kg)(s);case 5:r=e.v;case 6:1===r.code?(t.$message.success(r.msg||"Success"),t.modalVisible=!1,t.form.resetFields(),t.loadUsers()):t.$message.error(r.msg||"Operation failed"),e.n=8;break;case 7:e.p=7,e.v,t.$message.error("Operation failed");case 8:return e.p=8,t.modalLoading=!1,e.f(8);case 9:return e.a(2)}},e,null,[[2,7,8,9]])}));return function(t,a){return e.apply(this,arguments)}}())},handleDelete:function(t){var e=this;return(0,n.A)((0,i.A)().m(function a(){var s;return(0,i.A)().w(function(a){while(1)switch(a.p=a.n){case 0:return a.p=0,a.n=1,(0,l.hG)(t);case 1:s=a.v,1===s.code?(e.$message.success(s.msg||"User deleted"),e.loadUsers()):e.$message.error(s.msg||"Delete failed"),a.n=3;break;case 2:a.p=2,a.v,e.$message.error("Delete failed");case 3:return a.a(2)}},a,null,[[0,2]])}))()},showResetPasswordModal:function(t){var e=this;this.resetPasswordUserId=t.id,this.resetPasswordVisible=!0,this.$nextTick(function(){e.resetPasswordForm.resetFields()})},handleResetPassword:function(){var t=this;this.resetPasswordForm.validateFields(function(){var e=(0,n.A)((0,i.A)().m(function e(a,s){var r;return(0,i.A)().w(function(e){while(1)switch(e.p=e.n){case 0:if(!a){e.n=1;break}return e.a(2);case 1:return t.resetPasswordLoading=!0,e.p=2,e.n=3,(0,l.cw)({user_id:t.resetPasswordUserId,new_password:s.new_password});case 3:r=e.v,1===r.code?(t.$message.success(r.msg||"Password reset successfully"),t.resetPasswordVisible=!1,t.resetPasswordForm.resetFields()):t.$message.error(r.msg||"Reset failed"),e.n=5;break;case 4:e.p=4,e.v,t.$message.error("Reset failed");case 5:return e.p=5,t.resetPasswordLoading=!1,e.f(5);case 6:return e.a(2)}},e,null,[[2,4,5,6]])}));return function(t,a){return e.apply(this,arguments)}}())},getRoleColor:function(t){var e={admin:"red",manager:"orange",user:"blue",viewer:"default"};return e[t]||"default"},getRoleLabel:function(t){var e={admin:this.$t("userManage.roleAdmin")||"Admin",manager:this.$t("userManage.roleManager")||"Manager",user:this.$t("userManage.roleUser")||"User",viewer:this.$t("userManage.roleViewer")||"Viewer"};return e[t]||t},formatTime:function(t){if(!t)return"";var e=new Date("number"===typeof t?1e3*t:t);return e.toLocaleString()},formatCredits:function(t){return t||0===t?Number(t).toLocaleString("en-US",{minimumFractionDigits:0,maximumFractionDigits:2}):"0"},formatDate:function(t){if(!t)return"";var e=new Date(t);return e.toLocaleDateString()},isVipActive:function(t){return!!t&&new Date(t)>new Date},showCreditsModal:function(t){this.creditsEditingUser=t,this.newCredits=parseFloat(t.credits)||0,this.creditsRemark="",this.creditsModalVisible=!0},handleSetCredits:function(){var t=this;return(0,n.A)((0,i.A)().m(function e(){var a;return(0,i.A)().w(function(e){while(1)switch(e.p=e.n){case 0:if(!(t.newCredits<0)){e.n=1;break}return t.$message.error(t.$t("userManage.creditsNonNegative")||"Credits cannot be negative"),e.a(2);case 1:return t.creditsLoading=!0,e.p=2,e.n=3,(0,l.wq)({user_id:t.creditsEditingUser.id,credits:t.newCredits,remark:t.creditsRemark});case 3:a=e.v,1===a.code?(t.$message.success(a.msg||"Credits updated successfully"),t.creditsModalVisible=!1,t.loadUsers()):t.$message.error(a.msg||"Update failed"),e.n=5;break;case 4:e.p=4,e.v,t.$message.error("Update failed");case 5:return e.p=5,t.creditsLoading=!1,e.f(5);case 6:return e.a(2)}},e,null,[[2,4,5,6]])}))()},showVipModal:function(t){this.vipEditingUser=t,this.vipDays=30,this.vipCustomDate=null,this.vipRemark="",this.vipModalVisible=!0},handleSetVip:function(){var t=this;return(0,n.A)((0,i.A)().m(function e(){var a,s;return(0,i.A)().w(function(e){while(1)switch(e.p=e.n){case 0:if(a={user_id:t.vipEditingUser.id,remark:t.vipRemark},-1!==t.vipDays){e.n=2;break}if(t.vipCustomDate){e.n=1;break}return t.$message.error(t.$t("userManage.selectDate")||"Please select a date"),e.a(2);case 1:a.vip_expires_at=t.vipCustomDate.toISOString(),e.n=3;break;case 2:a.vip_days=t.vipDays;case 3:return t.vipLoading=!0,e.p=4,e.n=5,(0,l.nY)(a);case 5:s=e.v,1===s.code?(t.$message.success(s.msg||"VIP status updated successfully"),t.vipModalVisible=!1,t.loadUsers()):t.$message.error(s.msg||"Update failed"),e.n=7;break;case 6:e.p=6,e.v,t.$message.error("Update failed");case 7:return e.p=7,t.vipLoading=!1,e.f(7);case 8:return e.a(2)}},e,null,[[4,6,7,8]])}))()},loadOrders:function(){var t=this;return(0,n.A)((0,i.A)().m(function e(){var a;return(0,i.A)().w(function(e){while(1)switch(e.p=e.n){case 0:return t.orderLoading=!0,e.p=1,e.n=2,(0,l.vi)({page:t.orderPagination.current,page_size:t.orderPagination.pageSize,status:"all"===t.orderStatusFilter?"":t.orderStatusFilter,search:t.orderSearchKeyword||""});case 2:a=e.v,1===a.code?(t.orders=a.data.items||[],t.orderPagination.total=a.data.total||0,t.orderSummary=a.data.summary||{},t.ordersLoaded=!0):t.$message.error(a.msg||"Failed to load orders"),e.n=4;break;case 3:e.p=3,e.v,t.$message.error("Failed to load orders");case 4:return e.p=4,t.orderLoading=!1,e.f(4);case 5:return e.a(2)}},e,null,[[1,3,4,5]])}))()},handleOrderSearch:function(){this.orderPagination.current=1,this.loadOrders()},handleOrderFilterChange:function(){this.orderPagination.current=1,this.loadOrders()},handleOrderTableChange:function(t){this.orderPagination.current=t.current,this.orderPagination.pageSize=t.pageSize,this.loadOrders()},getOrderStatusColor:function(t){var e={paid:"green",confirmed:"green",pending:"orange",expired:"default",cancelled:"default",failed:"red"};return e[t]||"default"},getOrderStatusLabel:function(t){var e={paid:this.$t("adminOrders.statusPaid")||"Paid",confirmed:this.$t("adminOrders.statusConfirmed")||"Confirmed",pending:this.$t("adminOrders.statusPending")||"Pending",expired:this.$t("adminOrders.statusExpired")||"Expired",cancelled:this.$t("adminOrders.statusCancelled")||"Cancelled",failed:this.$t("adminOrders.statusFailed")||"Failed"};return e[t]||t},loadAiStats:function(){var t=this;return(0,n.A)((0,i.A)().m(function e(){var a;return(0,i.A)().w(function(e){while(1)switch(e.p=e.n){case 0:return t.aiStatsLoading=!0,e.p=1,e.n=2,(0,l.d$)({page:t.aiStatsPagination.current,page_size:t.aiStatsPagination.pageSize,search:t.aiStatsSearchKeyword||""});case 2:a=e.v,1===a.code?(t.aiUserStats=a.data.user_stats||[],t.aiRecentRecords=a.data.recent||[],t.aiStatsPagination.total=a.data.user_total||0,t.aiStatsSummary=a.data.summary||{},t.aiStatsLoaded=!0):t.$message.error(a.msg||"Failed to load AI stats"),e.n=4;break;case 3:e.p=3,e.v,t.$message.error("Failed to load AI stats");case 4:return e.p=4,t.aiStatsLoading=!1,e.f(4);case 5:return e.a(2)}},e,null,[[1,3,4,5]])}))()},handleAiStatsSearch:function(){this.aiStatsPagination.current=1,this.loadAiStats()},handleAiStatsTableChange:function(t){this.aiStatsPagination.current=t.current,this.aiStatsPagination.pageSize=t.pageSize,this.loadAiStats()}}},m=u,p=a(81656),g=(0,p.A)(m,s,r,!1,null,"7b696034",null),v=g.exports},84841:function(t,e,a){a.d(e,{DK:function(){return h},E$:function(){return c},Gl:function(){return p},O0:function(){return d},TK:function(){return n},aU:function(){return r},cw:function(){return l},d$:function(){return S},hG:function(){return o},kg:function(){return i},nY:function(){return y},r7:function(){return u},rx:function(){return v},v9:function(){return g},vF:function(){return m},vi:function(){return _},wq:function(){return f}});var s=a(75769);function r(t){return(0,s.Ay)({url:"/api/users/list",method:"get",params:t})}function i(t){return(0,s.Ay)({url:"/api/users/create",method:"post",data:t})}function n(t,e){return(0,s.Ay)({url:"/api/users/update",method:"put",params:{id:t},data:e})}function o(t){return(0,s.Ay)({url:"/api/users/delete",method:"delete",params:{id:t}})}function l(t){return(0,s.Ay)({url:"/api/users/reset-password",method:"post",data:t})}function d(){return(0,s.Ay)({url:"/api/users/roles",method:"get"})}function c(){return(0,s.Ay)({url:"/api/users/profile",method:"get"})}function u(t){return(0,s.Ay)({url:"/api/users/profile/update",method:"put",data:t})}function m(){return(0,s.Ay)({url:"/api/users/notification-settings",method:"get"})}function p(t){return(0,s.Ay)({url:"/api/users/notification-settings",method:"put",data:t})}function g(t){return(0,s.Ay)({url:"/api/users/my-credits-log",method:"get",params:t})}function v(t){return(0,s.Ay)({url:"/api/users/my-referrals",method:"get",params:t})}function f(t){return(0,s.Ay)({url:"/api/users/set-credits",method:"post",data:t})}function y(t){return(0,s.Ay)({url:"/api/users/set-vip",method:"post",data:t})}function h(t){return(0,s.Ay)({url:"/api/users/system-strategies",method:"get",params:t})}function _(t){return(0,s.Ay)({url:"/api/users/admin-orders",method:"get",params:t})}function S(t){return(0,s.Ay)({url:"/api/users/admin-ai-stats",method:"get",params:t})}}}]);