"use strict";(self["webpackChunkvue_antd_pro"]=self["webpackChunkvue_antd_pro"]||[]).push([[484],{32484:function(t,s,i){i.r(s),i.d(s,{default:function(){return b}});var a=function(){var t=this,s=t._self._c;return s("div",{staticClass:"billing-page",class:{"theme-dark":t.isDarkTheme}},[s("div",{staticClass:"page-header"},[s("h2",{staticClass:"page-title"},[s("a-icon",{attrs:{type:"wallet"}}),s("span",[t._v(t._s(t.$t("billing.title")))])],1),s("p",{staticClass:"page-desc"},[t._v(t._s(t.$t("billing.desc")))])]),s("a-card",{staticClass:"snapshot-card",attrs:{bordered:!1}},[s("div",{staticClass:"snapshot-row"},[s("div",{staticClass:"snap-item"},[s("div",{staticClass:"snap-label"},[t._v(t._s(t.$t("billing.snapshot.credits")))]),s("div",{staticClass:"snap-value"},[t._v(t._s(t.formatCredits(t.billing.credits)))])]),s("div",{staticClass:"snap-item"},[s("div",{staticClass:"snap-label"},[t._v(t._s(t.$t("billing.snapshot.vip")))]),s("div",{staticClass:"snap-value"},[t.billing.is_vip?s("a-tag",{attrs:{color:"gold"}},[s("a-icon",{attrs:{type:"crown"}}),t._v(" VIP ")],1):s("a-tag",[t._v(t._s(t.$t("billing.snapshot.notVip")))]),t.billing.vip_expires_at?s("span",{staticClass:"vip-exp"},[t._v(" "+t._s(t.$t("billing.snapshot.expires"))+": "+t._s(t.formatDate(t.billing.vip_expires_at))+" ")]):t._e()],1)])]),s("a-alert",{staticStyle:{"margin-top":"12px"},attrs:{type:"info","show-icon":"",message:t.$t("billing.vipRule.title"),description:t.$t("billing.vipRule.desc")}})],1),s("a-row",{staticStyle:{"margin-top":"16px"},attrs:{gutter:16}},[s("a-col",{attrs:{xs:24,md:8}},[s("a-card",{staticClass:"plan-card",attrs:{bordered:!1}},[s("div",{staticClass:"plan-title"},[t._v(t._s(t.$t("billing.plan.monthly")))]),s("div",{staticClass:"plan-price"},[t._v(" $"+t._s(t.plans.monthly.price_usd)+" "),s("span",{staticClass:"plan-unit"},[t._v("/ "+t._s(t.$t("billing.perMonth")))])]),s("div",{staticClass:"plan-benefit"},[t._v(" +"+t._s(t.plans.monthly.credits_once)+" "+t._s(t.$t("billing.credits"))+" ")]),s("a-button",{attrs:{type:"primary",block:"",loading:"monthly"===t.purchasing},on:{click:function(s){return t.buy("monthly")}}},[t._v(" "+t._s(t.$t("billing.buyNow"))+" ")])],1)],1),s("a-col",{attrs:{xs:24,md:8}},[s("a-card",{staticClass:"plan-card highlight",attrs:{bordered:!1}},[s("div",{staticClass:"plan-title"},[t._v(t._s(t.$t("billing.plan.yearly")))]),s("div",{staticClass:"plan-price"},[t._v(" $"+t._s(t.plans.yearly.price_usd)+" "),s("span",{staticClass:"plan-unit"},[t._v("/ "+t._s(t.$t("billing.perYear")))])]),s("div",{staticClass:"plan-benefit"},[t._v(" +"+t._s(t.plans.yearly.credits_once)+" "+t._s(t.$t("billing.credits"))+" ")]),s("a-button",{attrs:{type:"primary",block:"",loading:"yearly"===t.purchasing},on:{click:function(s){return t.buy("yearly")}}},[t._v(" "+t._s(t.$t("billing.buyNow"))+" ")])],1)],1),s("a-col",{attrs:{xs:24,md:8}},[s("a-card",{staticClass:"plan-card",attrs:{bordered:!1}},[s("div",{staticClass:"plan-title"},[t._v(t._s(t.$t("billing.plan.lifetime")))]),s("div",{staticClass:"plan-price"},[t._v(" $"+t._s(t.plans.lifetime.price_usd)+" "),s("span",{staticClass:"plan-unit"},[t._v(t._s(t.$t("billing.once")))])]),s("div",{staticClass:"plan-benefit"},[t._v(" "+t._s(t.$t("billing.lifetimeMonthly"))+" +"+t._s(t.plans.lifetime.credits_monthly)+" "+t._s(t.$t("billing.credits"))+" ")]),s("a-button",{attrs:{type:"primary",block:"",loading:"lifetime"===t.purchasing},on:{click:function(s){return t.buy("lifetime")}}},[t._v(" "+t._s(t.$t("billing.buyNow"))+" ")])],1)],1)],1),s("a-modal",{attrs:{title:null,footer:null,maskClosable:!1,closable:!1,wrapClassName:"usdt-pay-modal-wrap",width:"600px"},on:{cancel:t.closeUsdtModal},model:{value:t.usdtModalVisible,callback:function(s){t.usdtModalVisible=s},expression:"usdtModalVisible"}},[t.usdtOrder?s("div",{staticClass:"usdt-checkout"},[s("div",{staticClass:"checkout-header"},[s("div",{staticClass:"header-left"},[s("div",{staticClass:"usdt-logo"},[s("svg",{attrs:{viewBox:"0 0 32 32",width:"28",height:"28"}},[s("circle",{attrs:{cx:"16",cy:"16",r:"16",fill:"#26A17B"}}),s("path",{attrs:{d:"M17.9 17.9v-.003c-.1.008-.6.04-1.8.04-1 0-1.5-.028-1.7-.04v.004c-3.4-.15-5.9-.74-5.9-1.44 0-.7 2.5-1.29 5.9-1.44v2.3c.2.013.7.05 1.7.05 1.2 0 1.6-.04 1.8-.05v-2.3c3.4.15 5.9.74 5.9 1.44 0 .7-2.5 1.29-5.9 1.44zm0-3.12V12.7h5v-2.4H9.2v2.4h5v2.08c-3.8.18-6.7.93-6.7 1.83s2.9 1.65 6.7 1.83v6.56h3.6v-6.56c3.8-.18 6.7-.93 6.7-1.83s-2.8-1.65-6.6-1.83z",fill:"#fff"}})])]),s("div",{staticClass:"header-text"},[s("div",{staticClass:"header-title"},[t._v(t._s(t.$t("billing.usdt.title")))]),s("div",{staticClass:"header-desc"},[t._v(t._s(t.$t("billing.usdt.hintDesc")))])])]),s("a-button",{staticClass:"close-btn",attrs:{type:"link"},on:{click:t.closeUsdtModal}},[s("a-icon",{attrs:{type:"close"}})],1)],1),s("div",{staticClass:"checkout-steps"},t._l(t.stepItems,function(i,a){return s("div",{key:a,staticClass:"step-item",class:{active:a<=t.usdtStepCurrent,current:a===t.usdtStepCurrent}},[s("div",{staticClass:"step-dot"},[s("span",{staticClass:"dot-inner"}),a===t.usdtStepCurrent&&"pending"===t.usdtOrder.status?s("span",{staticClass:"dot-pulse"}):t._e()]),s("span",{staticClass:"step-label"},[t._v(t._s(i))]),a<t.stepItems.length-1?s("div",{staticClass:"step-line",class:{filled:a<t.usdtStepCurrent}}):t._e()])}),0),s("div",{staticClass:"checkout-body"},[s("div",{staticClass:"qr-section"},[s("div",{staticClass:"qr-frame",class:{"qr-confirmed":"confirmed"===t.usdtOrder.status}},[s("img",{attrs:{src:t.usdtQrUrl,alt:"USDT QR"}})]),s("div",{staticClass:"qr-amount"},[s("span",{staticClass:"amt-number"},[t._v(t._s(t.usdtOrder.amount_usdt))]),s("span",{staticClass:"amt-currency"},[t._v("USDT")])]),s("div",{staticClass:"qr-chain"},[s("a-tag",{attrs:{color:"green"}},[t._v(t._s(t.usdtOrder.chain))])],1)]),s("div",{staticClass:"info-section"},[s("div",{staticClass:"info-block"},[s("div",{staticClass:"info-label"},[s("a-icon",{attrs:{type:"environment"}}),s("span",[t._v(t._s(t.$t("billing.usdt.address")))])],1),s("div",{staticClass:"addr-box"},[s("code",{staticClass:"addr-text"},[t._v(t._s(t.usdtOrder.address))]),s("a-tooltip",{attrs:{title:t.$t("billing.usdt.copyAddress")}},[s("a-button",{staticClass:"copy-btn",attrs:{size:"small"},on:{click:function(s){return t.copyText(t.usdtOrder.address)}}},[s("a-icon",{attrs:{type:"copy"}})],1)],1)],1)]),s("div",{staticClass:"info-block"},[s("div",{staticClass:"info-label"},[s("a-icon",{attrs:{type:"dollar"}}),s("span",[t._v(t._s(t.$t("billing.usdt.amount")))])],1),s("div",{staticClass:"amt-box"},[s("code",{staticClass:"amt-text"},[t._v(t._s(t.usdtOrder.amount_usdt)+" USDT")]),s("a-tooltip",{attrs:{title:t.$t("billing.usdt.copyAmount")}},[s("a-button",{staticClass:"copy-btn",attrs:{size:"small"},on:{click:function(s){return t.copyText(t.usdtOrder.amount_usdt)}}},[s("a-icon",{attrs:{type:"copy"}})],1)],1)],1)]),s("div",{staticClass:"warn-strip"},[s("a-icon",{attrs:{type:"exclamation-circle"}}),s("span",[t._v(t._s(t.$t("billing.usdt.hintTitle")))])],1),s("div",{staticClass:"meta-row"},[s("div",{staticClass:"meta-status"},[s("a-tag",{attrs:{color:t.statusColor}},[t._v(t._s(t.statusText))])],1),t.usdtOrder.expires_at?s("div",{staticClass:"meta-expire"},[s("a-icon",{attrs:{type:"clock-circle"}}),s("span",[t._v(t._s(t.formatDateTime(t.usdtOrder.expires_at)))])],1):t._e()]),"expired"===t.usdtOrder.status?s("div",{staticClass:"expired-hint"},[s("a-alert",{attrs:{type:"warning",message:t.$t("billing.usdt.expiredHint"),"show-icon":"",banner:""}})],1):t._e(),"confirmed"===t.usdtOrder.status?s("div",{staticClass:"confirmed-hint"},[s("a-alert",{attrs:{type:"success",message:t.$t("billing.usdt.confirmedHint"),"show-icon":"",banner:""}})],1):t._e()])]),s("div",{staticClass:"checkout-footer"},["confirmed"!==t.usdtOrder.status?s("a-button",{attrs:{size:"small",loading:t.usdtRefreshing},on:{click:t.refreshUsdtOrder}},[s("a-icon",{attrs:{type:"reload"}}),t._v(" "+t._s(t.$t("billing.usdt.refresh"))+" ")],1):t._e(),"confirmed"===t.usdtOrder.status?s("a-button",{attrs:{type:"primary"},on:{click:t.closeUsdtModal}},[s("a-icon",{attrs:{type:"check-circle"}}),t._v(" "+t._s(t.$t("common.done")||"Done")+" ")],1):s("a-button",{on:{click:t.closeUsdtModal}},[t._v(t._s(t.$t("common.close")||"Close"))])],1)]):t._e()])],1)},e=[],r=i(81127),l=i(56252),n=i(76338),d=(i(2892),i(95353)),c=i(75769),o={Plans:"/api/billing/plans",Purchase:"/api/billing/purchase",UsdtCreate:"/api/billing/usdt/create",UsdtOrder:function(t){return"/api/billing/usdt/order/".concat(t)}};function u(){return(0,c.Ay)({url:o.Plans,method:"get"})}function p(t){return(0,c.Ay)({url:o.UsdtCreate,method:"post",data:{plan:t}})}function v(t){var s=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];return(0,c.Ay)({url:o.UsdtOrder(t),method:"get",params:{refresh:s?1:0}})}var g={name:"BillingPage",computed:(0,n.A)((0,n.A)({},(0,d.aH)({navTheme:function(t){return t.app.theme}})),{},{isDarkTheme:function(){return"dark"===this.navTheme||"realdark"===this.navTheme},usdtQrUrl:function(){var t=this.getUsdtQrText();return t?"https://api.qrserver.com/v1/create-qr-code/?size=220x220&data=".concat(encodeURIComponent(t)):""},statusText:function(){var t=this.usdtOrder&&this.usdtOrder.status?String(this.usdtOrder.status):"",s={pending:this.$t("billing.usdt.status.pending"),paid:this.$t("billing.usdt.status.paid"),confirmed:this.$t("billing.usdt.status.confirmed"),expired:this.$t("billing.usdt.status.expired"),cancelled:this.$t("billing.usdt.status.cancelled"),failed:this.$t("billing.usdt.status.failed")};return s[t]||t||"--"},statusColor:function(){var t=this.usdtOrder&&this.usdtOrder.status?String(this.usdtOrder.status):"";return"confirmed"===t?"green":"paid"===t?"blue":"expired"===t||"failed"===t||"cancelled"===t?"red":"orange"},usdtStepCurrent:function(){var t=this.usdtOrder&&this.usdtOrder.status?String(this.usdtOrder.status):"";return"confirmed"===t?2:"paid"===t?1:0},stepItems:function(){return[this.$t("billing.usdt.status.pending"),this.$t("billing.usdt.status.paid"),this.$t("billing.usdt.status.confirmed")]}}),data:function(){return{loading:!1,purchasing:"",usdtModalVisible:!1,usdtOrder:null,usdtPollingTimer:null,usdtRefreshing:!1,billing:{credits:0,is_vip:!1,vip_expires_at:null},plans:{monthly:{price_usd:19.9,credits_once:500},yearly:{price_usd:199,credits_once:8e3},lifetime:{price_usd:499,credits_monthly:800}}}},created:function(){this.load()},beforeDestroy:function(){this.stopUsdtPolling()},methods:{load:function(){var t=this;return(0,l.A)((0,r.A)().m(function s(){var i,a,e;return(0,r.A)().w(function(s){while(1)switch(s.p=s.n){case 0:return t.loading=!0,s.p=1,s.n=2,u();case 2:i=s.v,i&&1===i.code&&i.data?(t.plans=i.data.plans||t.plans,t.billing=i.data.billing||t.billing):t.$message.error((null===i||void 0===i?void 0:i.msg)||"Load failed"),s.n=4;break;case 3:s.p=3,e=s.v,t.$message.error((null===e||void 0===e||null===(a=e.response)||void 0===a||null===(a=a.data)||void 0===a?void 0:a.msg)||"Load failed");case 4:return s.p=4,t.loading=!1,s.f(4);case 5:return s.a(2)}},s,null,[[1,3,4,5]])}))()},formatCredits:function(t){return t||0===t?Number(t).toLocaleString("en-US",{minimumFractionDigits:0,maximumFractionDigits:2}):"0"},formatDate:function(t){return t?new Date(t).toLocaleDateString():""},buy:function(t){var s=this;return(0,l.A)((0,r.A)().m(function i(){var a,e,l;return(0,r.A)().w(function(i){while(1)switch(i.p=i.n){case 0:return s.purchasing=t,i.p=1,i.n=2,p(t);case 2:a=i.v,a&&1===a.code&&a.data?(s.usdtOrder=a.data,s.usdtModalVisible=!0,s.startUsdtPolling()):s.$message.error((null===a||void 0===a?void 0:a.msg)||s.$t("billing.purchaseFailed")),i.n=4;break;case 3:i.p=3,l=i.v,s.$message.error((null===l||void 0===l||null===(e=l.response)||void 0===e||null===(e=e.data)||void 0===e?void 0:e.msg)||s.$t("billing.purchaseFailed"));case 4:return i.p=4,s.purchasing="",i.f(4);case 5:return i.a(2)}},i,null,[[1,3,4,5]])}))()},getUsdtQrText:function(){return this.usdtOrder&&this.usdtOrder.address||""},copyText:function(t){try{var s=String(t||"");if(!s)return;this.$copyText(s),this.$message.success(this.$t("common.copySuccess")||"Copied")}catch(i){this.$message.error(this.$t("common.copyFailed")||"Copy failed")}},formatDateTime:function(t){return t?new Date(t).toLocaleString():""},refreshUsdtOrder:function(){var t=this;return(0,l.A)((0,r.A)().m(function s(){var i,a;return(0,r.A)().w(function(s){while(1)switch(s.p=s.n){case 0:if(t.usdtOrder&&t.usdtOrder.order_id){s.n=1;break}return s.a(2);case 1:return t.usdtRefreshing=!0,s.p=2,s.n=3,v(t.usdtOrder.order_id,!0);case 3:if(i=s.v,!i||1!==i.code||!i.data){s.n=6;break}if(t.usdtOrder=i.data,a=t.usdtOrder.status,"confirmed"!==a){s.n=5;break}return t.$message.success(t.$t("billing.usdt.paidSuccess")),t.stopUsdtPolling(),s.n=4,t.load();case 4:s.n=6;break;case 5:"expired"!==a&&"failed"!==a&&"cancelled"!==a||t.stopUsdtPolling();case 6:s.n=8;break;case 7:s.p=7,s.v;case 8:return s.p=8,t.usdtRefreshing=!1,s.f(8);case 9:return s.a(2)}},s,null,[[2,7,8,9]])}))()},startUsdtPolling:function(){var t=this;this.stopUsdtPolling(),this.usdtPollingTimer=setInterval(function(){t.refreshUsdtOrder()},5e3)},stopUsdtPolling:function(){this.usdtPollingTimer&&(clearInterval(this.usdtPollingTimer),this.usdtPollingTimer=null)},closeUsdtModal:function(){this.usdtModalVisible=!1,this.stopUsdtPolling()}}},h=g,m=i(81656),_=(0,m.A)(h,a,e,!1,null,"7f69db26",null),b=_.exports}}]);